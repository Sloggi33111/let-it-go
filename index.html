<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Pinterest-Style Image Gallery</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
</head>
<body>
    <h1>Welcome to My Image Gallery!</h1>
    <div class="grid" id="grid">
        <div class="grid-sizer"></div> <!-- 用于响应式列宽 -->
    </div>
    
    <script>
        // 动态加载图片
        fetch('images.json')
            .then(response => response.json())
            .then(images => {
                const grid = document.getElementById('grid');
                
                images.forEach(src => {
                    const item = document.createElement('div');
                    item.className = 'grid-item'; // 包裹 div，像 Pinterest 卡片
                    
                    const img = document.createElement('img');
                    img.src = src;
                    img.alt = 'Image';
                    img.loading = 'lazy';
                    
                    // 点击复制文件名
                    img.onclick = () => {
                        const filename = src.split('/').pop();
                        navigator.clipboard.writeText(filename)
                            .then(() => alert('Copied filename to clipboard: ' + filename))
                            .catch(err => console.error('Failed to copy: ', err));
                    };
                    
                    item.appendChild(img);
                    grid.appendChild(item);
                });
                
                // 等图片加载后初始化 Masonry
                imagesLoaded(grid, function() {
                    new Masonry(grid, {
                        itemSelector: '.grid-item', // 选择 item 而非 img
                        columnWidth: '.grid-sizer',
                        gutter: 10,
                        percentPosition: true, // 百分比定位，优化排列
                        stagger: 30, // 交错动画，像 Pinterest 加载
                        fitWidth: true
                    });
                });
            })
            .catch(error => console.error('Failed to load images:', error));
    </script>
</body>
</html>
